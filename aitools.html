
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI-Tools: Graph search &#8212; Artificial intelligence, Concepts, Challenges, and Opportunities</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Probabilistic inference" href="inference.html" />
    <link rel="prev" title="Block diagram of AI" href="blockdiag.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/ai.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Artificial intelligence, Concepts, Challenges, and Opportunities</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   introduction
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="content.html">
   Contents of the course
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="concepts.html">
     Simple reflex agents
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="manifestation.html">
     Manifestation of AI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="blockdiag.html">
     Block diagram of AI
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     AI-Tools: Graph search
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="inference.html">
     Probabilistic inference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="machinelearning.html">
     Machine Learning (ML)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="intelligent_agent.html">
     Implementing a simple intelligent agent
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="bibliography.html">
     Bibliography
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="exercises.html">
     Excercises
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/aitools.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/aitools.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#finding-a-way-between-towns">
   Finding a way between towns
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#navigation-algorithm-for-a-human-being">
     Navigation algorithm for a human being
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#navigation-algorithm-for-a-computer">
     Navigation algorithm for a computer
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#representing-knowledge">
       Representing knowledge
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#how-to-encode-this-graph-for-a-computer">
       How to encode this graph for a computer?
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#how-to-search-the-path">
       How to search the path
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#this-depth-first-implemenation-is-below">
       This depth first implemenation is below
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#recursive-solution">
       Recursive solution
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#recursive-breadth-first-solution">
       Recursive breadth first solution
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#solution-using-networkx-graph-library">
     Solution using Networkx graph library
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#encoding-the-information">
       Encoding the information
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#asking-questions-from-the-graph">
       Asking questions from the graph
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-algorithm">
       A* algorithm
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#more-complex-example">
       More complex example
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#intelligent-navigation-agent">
   Intelligent navigation agent
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   Summary
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="ai-tools-graph-search">
<h1>AI-Tools: Graph search<a class="headerlink" href="#ai-tools-graph-search" title="Permalink to this headline">¶</a></h1>
<div class="section" id="finding-a-way-between-towns">
<h2>Finding a way between towns<a class="headerlink" href="#finding-a-way-between-towns" title="Permalink to this headline">¶</a></h2>
<p>To actually solve the navigation problem, two things are needed:</p>
<ol class="simple">
<li><p>Knowledge and</p></li>
<li><p>Algorithm</p></li>
</ol>
<p>For human beings, a map is the model of the World, which include the knowledge needed for navigation. The ment for navigation shows the location of the cities and the roads connecting them. The map is printed in scale, and therefore the distances between the cities can be measured from the map.</p>
<p><img alt="Kartta" src="_images/Kartta.png" /></p>
<p>A human navigator have learned how to use this data model for finding the best routes, estimate the distances, and selecting optimal roads. We are so used to using maps (at least we were before starting to use computers for navigation) that we hardly think that we are carrying out a navigation algorithm in our heads when selecting the optimal roads. To be able to implement an artificial agent for navigation, it is usefull to think how a humang agent works, and then try to implement it with a computer. How would you explain how you navigate?</p>
<div class="section" id="navigation-algorithm-for-a-human-being">
<h3>Navigation algorithm for a human being<a class="headerlink" href="#navigation-algorithm-for-a-human-being" title="Permalink to this headline">¶</a></h3>
<p>This is an example of a simple navigation algorithm for a human being who tries to navigate through completely strange area:</p>
<ol class="simple">
<li><p>First indentify your current location on the map by browsing through all names in the map until you find a location where you currently are.</p></li>
<li><p>Then identify your target location on the map by browsing through all names in the map until you find a location where you are aiming at.</p></li>
<li><p>Follow the road starting from the source location which is leading closest to the direction of the the target location.</p></li>
<li><p>Drive forward</p></li>
<li><p>If you reach a crossing, choose the road which is best directed towards the target city.</p></li>
<li><p>Stop if you reach the target city, otherwise go back to stage 4</p></li>
</ol>
<p>This algorithm is some sort of greedy algorithm (informed search), since it uses information about the direction of the roads when selecting from many different options.</p>
<p>In reality a person would probably use more complex algorithm, it is for example more optimal to follow bigger main roads than to turn a smaller road just because it is momentarily leading closer to the right direction than the main road. The map also contains the data of actual distances, which is also often used by human navigator to plan ahead an optimal route.</p>
<p>It seems that the good implementation of the navigation is indeed dependent on the available knowledge, knowledge presentation and an algortithm.</p>
</div>
<div class="section" id="navigation-algorithm-for-a-computer">
<h3>Navigation algorithm for a computer<a class="headerlink" href="#navigation-algorithm-for-a-computer" title="Permalink to this headline">¶</a></h3>
<div class="section" id="representing-knowledge">
<h4>Representing knowledge<a class="headerlink" href="#representing-knowledge" title="Permalink to this headline">¶</a></h4>
<p>Maps are useful to both computers and human beings, they just need to be presented in totally different form for computer.</p>
<p>For computer to understand, knowledge has to be stored in the memory. Since the memory of a computer is just a huge array of memory locations, some sort of framework for organizing the data in the memory is necessary. This kind of framework or ontology describing what data is stored in which location, what the data means and how it can be accesses, is called as a data structure.</p>
<p>A simplest data structure is a variable:</p>
<p><code class="docutils literal notranslate"><span class="pre">x=2</span></code></p>
<p>The command above tells computer to reserve a location in a memory, store an integer 2 into it and call the memory location with a symbolic name <code class="docutils literal notranslate"><span class="pre">x</span></code>. When the data is needed in the future, the computer just reads the memory location which name is <code class="docutils literal notranslate"><span class="pre">x</span></code> to be able to use the value, and it can also write a new value to the same location.</p>
<p>A slightly more complex data structure would be the list of names of the locations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">towns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Vaasa&#39;</span><span class="p">,</span> <span class="s1">&#39;Seinäjoki&#39;</span><span class="p">,</span> <span class="s1">&#39;Vimpeli&#39;</span><span class="p">,</span> <span class="s1">&#39;Ylistaro&#39;</span><span class="p">,</span> <span class="s1">&#39;Lapua&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>This time, the computer reserves memory for three strings, and calls the memory location with a same <code class="docutils literal notranslate"><span class="pre">towns</span></code>. The name of the second town in the list of towns can be easily read or written.</p>
<p>A road between towns can be stored as a triplet of (source town, destination town, and a distance), for example:
<code class="docutils literal notranslate"><span class="pre">('Vaasa',</span> <span class="pre">'Laihia',</span> <span class="pre">26)</span></code></p>
<p>It would mean that there is a road between Vaasa to Laihia, and obviously from Laihia to Vaasa, and it’s lenght is 26 km.</p>
<p>This data structure would not be very efficient, since it would require searching through the full list of towns for every branch in every crossroads.</p>
<p>A map can be more efficiently described as a graph:</p>
<p><img alt="Simplegraph" src="_images/mapgraph.svg" /></p>
<p>In the graph above, the nodes are the towns or municipalities, and the edges are the main roads connecting the towns together. The weights on the edges describes the distances between the towns.</p>
<p>The graph above describes both the topology and the quantitative data needed for a computer for searching the route. What would be a good algorithm to search the map above? Both Breadth first search and depth first search would efficiently find the path.</p>
<div class="admonition-question admonition">
<p class="admonition-title">Question?</p>
<p>In which order breadth first and depth first searches would list the paths. Which one would probably find a better path, or is there any difference?</p>
</div>
<div class="admonition-question admonition">
<p class="admonition-title">Question?</p>
<p>What would be obstacles for both methods, and how they could be overcome?</p>
</div>
<div class="admonition-question admonition">
<p class="admonition-title">Question?</p>
<p>What would be appropriate heuristic function in the A* search, and how does that help?</p>
</div>
</div>
<div class="section" id="how-to-encode-this-graph-for-a-computer">
<h4>How to encode this graph for a computer?<a class="headerlink" href="#how-to-encode-this-graph-for-a-computer" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># A template for all nodes (actually a class)</span>
<span class="k">class</span> <span class="nc">Node</span><span class="p">:</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
    <span class="n">neighbors</span><span class="o">=</span><span class="p">[]</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">name</span>

<span class="c1"># Implement all nodes based on the Node class (template)</span>
<span class="c1"># The instances of the template are called as objects</span>
<span class="n">vaasa</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Vaasa&#39;</span><span class="p">)</span>
<span class="n">laihia</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Laihia&#39;</span><span class="p">)</span>
<span class="n">voyri</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Vöyri&#39;</span><span class="p">)</span>
<span class="n">ilmajoki</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Ilmajoki&#39;</span><span class="p">)</span>
<span class="n">ylistaro</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Ylistaro&#39;</span><span class="p">)</span>
<span class="n">seinajoki</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Seinäjoki&#39;</span><span class="p">)</span>
<span class="n">voyri</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Vöyri&#39;</span><span class="p">)</span>
<span class="n">lapua</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Lapua&#39;</span><span class="p">)</span>
<span class="n">jepua</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Jepua&#39;</span><span class="p">)</span>
<span class="n">alajarvi</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Alajarvi&#39;</span><span class="p">)</span>
<span class="n">kyyjarvi</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Kyyjarvi&#39;</span><span class="p">)</span>
<span class="n">kuortane</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Kuortane&#39;</span><span class="p">)</span>
<span class="n">kauhava</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Kauhava&#39;</span><span class="p">)</span>
<span class="n">lappajarvi</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Lappajärvi&#39;</span><span class="p">)</span>
<span class="n">evijarvi</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Evijärvi&#39;</span><span class="p">)</span>
<span class="n">vimpeli</span><span class="o">=</span><span class="n">Node</span><span class="p">(</span><span class="s1">&#39;Vimpeli&#39;</span><span class="p">)</span>

<span class="c1"># Then the implementation of the connection between the towns (edges)</span>
<span class="n">vaasa</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">voyri</span><span class="p">,</span> <span class="mi">32</span><span class="p">),</span> <span class="p">(</span><span class="n">laihia</span><span class="p">,</span> <span class="mi">26</span><span class="p">)]</span>
<span class="n">laihia</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">ilmajoki</span><span class="p">,</span> <span class="mi">45</span><span class="p">),</span> <span class="p">(</span><span class="n">ylistaro</span><span class="p">,</span><span class="mi">29</span><span class="p">)]</span>
<span class="n">voyri</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">jepua</span><span class="p">,</span> <span class="mi">42</span><span class="p">),(</span><span class="n">kauhava</span><span class="p">,</span> <span class="mi">56</span><span class="p">)]</span>
<span class="n">ilmajoki</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">seinajoki</span><span class="p">,</span> <span class="mi">18</span><span class="p">)]</span>
<span class="n">ylistaro</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">seinajoki</span><span class="p">,</span><span class="mi">27</span><span class="p">),</span> <span class="p">(</span><span class="n">lapua</span><span class="p">,</span> <span class="mi">28</span><span class="p">)]</span>
<span class="n">seinajoki</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">lapua</span><span class="p">,</span> <span class="mi">26</span><span class="p">)]</span>
<span class="n">voyri</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">kauhava</span><span class="p">,</span> <span class="mi">45</span><span class="p">),(</span><span class="n">jepua</span><span class="p">,</span> <span class="mi">42</span><span class="p">)]</span>
<span class="n">lapua</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">kauhava</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span> <span class="p">(</span><span class="n">alajarvi</span><span class="p">,</span> <span class="mi">46</span><span class="p">)]</span>
<span class="n">jepua</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">kauhava</span><span class="p">,</span> <span class="mi">56</span><span class="p">)]</span>
<span class="n">alajarvi</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">kyyjarvi</span><span class="p">,</span> <span class="mi">36</span><span class="p">),</span> <span class="p">(</span><span class="n">vimpeli</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span> <span class="p">(</span><span class="n">kuortane</span><span class="p">,</span> <span class="mi">40</span><span class="p">)]</span>
<span class="n">kyyjarvi</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[]</span>
<span class="n">kuortane</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[]</span>
<span class="n">kauhava</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">lappajarvi</span><span class="p">,</span> <span class="mi">38</span><span class="p">),</span> <span class="p">(</span><span class="n">evijarvi</span><span class="p">,</span> <span class="mi">44</span><span class="p">)]</span>
<span class="n">lappajarvi</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">vimpeli</span><span class="p">,</span> <span class="mi">23</span><span class="p">)]</span>
<span class="n">evijarvi</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[(</span><span class="n">vimpeli</span><span class="p">,</span> <span class="mi">32</span><span class="p">)]</span>
<span class="n">vimpeli</span><span class="o">.</span><span class="n">neighbors</span><span class="o">=</span><span class="p">[]</span>

<span class="c1"># Now we can list the beginning of the graph</span>
<span class="n">start</span><span class="o">=</span><span class="n">vaasa</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting the search from&quot;</span><span class="p">,</span> <span class="n">start</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The neighbors are&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">neighbor</span><span class="p">,</span> <span class="n">distance</span> <span class="ow">in</span> <span class="n">start</span><span class="o">.</span><span class="n">neighbors</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">-&quot;</span><span class="p">,</span> <span class="n">neighbor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">:&quot;</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="s2">&quot;km&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Starting the search from Vaasa
The neighbors are
	- Vöyri 	: 32 km
	- Laihia 	: 26 km
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="how-to-search-the-path">
<h4>How to search the path<a class="headerlink" href="#how-to-search-the-path" title="Permalink to this headline">¶</a></h4>
<p>Both depth first and bredth first algorithms are possible. In depth first search, it is easier to keep the current search path in the memory. In breadth first search, all parallel paths needs to be kept in memory at the same time, which requires more complex data structure and more memory. An example of depth first search algorithm is the following:</p>
<p>Start from the starting node, and repeat following phases until target is found:</p>
<ul class="simple">
<li><p>If there is still unvisited neighbour cities left:</p>
<ul>
<li><p>take first unvisited neighbour and add it into the stack of cities along current path</p></li>
<li><p>Enter into that neighbour and continue</p></li>
</ul>
</li>
<li><p>If there is no more unvisited neighbour cities under current path</p>
<ul>
<li><p>remove the latest city from the stack</p></li>
<li><p>come backwards to the previous city and continue</p></li>
</ul>
</li>
</ul>
<p>The stack describing the current path could look as follows in an example search case</p>
<ol class="simple">
<li><p>Vaasa -&gt; Laihia</p></li>
<li><p>Vaasa -&gt; Laihia -&gt; Ylistaro</p></li>
<li><p>Vaasa -&gt; Laihia -&gt; Ylistaro -&gt; Lapua</p></li>
<li><p>Vaasa -&gt; Laihia -&gt; Ylistaro -&gt; Lapua -&gt; Alajärvi</p></li>
<li><p>Vaasa -&gt; Laihia -&gt; Ylistaro -&gt; Lapua -&gt; Alajärvi -&gt; Kyyjärvi (<em>no neighbors, go back</em>)</p></li>
<li><p>Vaasa -&gt; Laihia -&gt; Ylistaro -&gt; Lapua -&gt; Alajärvi -&gt; Kuortane (<em>no neighbors, go back</em>)</p></li>
<li><p>Vaasa -&gt; Laihia -&gt; Ylistaro -&gt; Lapua -&gt; Alajärvi -&gt; Vimpeli (<em>Target found path is in the stack</em>)</p></li>
</ol>
</div>
<div class="section" id="this-depth-first-implemenation-is-below">
<h4>This depth first implemenation is below<a class="headerlink" href="#this-depth-first-implemenation-is-below" title="Permalink to this headline">¶</a></h4>
<p>For the following implementation, stack (LIFO) and FIFO data-structures are needed. They are shown in the following Figure. In python, a normal list can be used as FIFO or Stack data structure. In both cases new entries are inserted in the end of the list, using <code class="docutils literal notranslate"><span class="pre">append()</span></code> or <code class="docutils literal notranslate"><span class="pre">push()</span></code> -functions. When the list is used as a stack, the sample inserted last, is popped out, using <code class="docutils literal notranslate"><span class="pre">pop()</span></code> command, and when the list is used as LIFO, the first value in the list is popped out with <code class="docutils literal notranslate"><span class="pre">pop(0)</span></code> -function call.</p>
<p><img alt="FIFO and LIFO" src="_images/FIFOandLIFO.svg" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Stack of town within the path</span>
<span class="n">path_stack</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Queue of unhandled towns, and the depth, and distance</span>
<span class="n">queue</span> <span class="o">=</span> <span class="p">[(</span><span class="n">vaasa</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>

<span class="c1"># Current depth</span>
<span class="n">depth</span><span class="o">=</span><span class="mi">0</span>

<span class="c1"># Repeat until we have more town to visit</span>
<span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
    <span class="c1"># Take new node and it&#39;s depth from the queue</span>
    <span class="n">current_node</span><span class="p">,</span> <span class="n">new_depth</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    
    <span class="c1"># If the current_node is deeper than previous, insert the new node in the stack</span>
    <span class="c1"># Insert also the distance from the previous node</span>
    <span class="k">if</span> <span class="n">new_depth</span><span class="o">&gt;</span><span class="n">depth</span><span class="p">:</span>
        <span class="n">path_stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">current_node</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># If the solution was not found, and the algorithms is coming back</span>
        <span class="c1"># then the previous entries needs to be popped out from stack,</span>
        <span class="c1"># and the current node inserted instead</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">depth</span><span class="o">-</span><span class="n">new_depth</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">path_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">path_stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">current_node</span><span class="p">,</span><span class="n">d</span><span class="p">))</span>
        
    <span class="c1"># update the current depth</span>
    <span class="n">depth</span><span class="o">=</span><span class="n">new_depth</span>
    
    <span class="c1"># Check is the solution was found, if it was, break the loop</span>
    <span class="k">if</span> <span class="n">current_node</span><span class="o">==</span><span class="n">vimpeli</span><span class="p">:</span>
        <span class="k">break</span>
        
    <span class="c1"># Othervise, add the neighbours of the current node to the queue of nodes</span>
    <span class="c1"># yet to be processed. Use depth one deeper than current node</span>
    <span class="c1"># The distance from the current node is also appended</span>
    <span class="k">for</span> <span class="n">neighbor</span><span class="p">,</span> <span class="n">distance</span> <span class="ow">in</span> <span class="n">current_node</span><span class="o">.</span><span class="n">neighbors</span><span class="p">:</span>
        <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">neighbor</span><span class="p">,</span> <span class="n">depth</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">distance</span><span class="p">))</span>
 
<span class="c1"># Print the result</span>
<span class="n">distance</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">node</span><span class="p">,</span><span class="n">d</span>  <span class="ow">in</span> <span class="n">path_stack</span><span class="p">:</span>
    <span class="n">distance</span><span class="o">=</span><span class="n">distance</span><span class="o">+</span><span class="n">d</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%10s</span><span class="s2"> : </span><span class="si">%4d</span><span class="s2"> km&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">distance</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     Vaasa :    0 km
    Laihia :   26 km
  Ylistaro :   55 km
     Lapua :   83 km
  Alajarvi :  129 km
   Vimpeli :  151 km
</pre></div>
</div>
</div>
</div>
<div class="admonition-question admonition">
<p class="admonition-title">Question?</p>
<p>Is this an optimal solution? How to find other solutions?</p>
</div>
</div>
<div class="section" id="recursive-solution">
<h4>Recursive solution<a class="headerlink" href="#recursive-solution" title="Permalink to this headline">¶</a></h4>
<p>Recursive functions suit naturally for graph search, because the problem is inherently recursive. They are not very often used, however, because they require more memory than loop-algorithms due to recursive function calls. Some programming languages, especially from LISP-family have special implementation for tail-recursion, and in those languages recursion is more often used.</p>
<p>The idea of recursive solution is very simple. Since the problem for finding a route from Vaasa to Vimpeli is non-trivial, try to go to the next town closer to Vimpeli, such as Laihia, and try to find the route to Vimpeli from there. Since that is also non-trivial, go from Laihia to the next town, like Ilmajoki, and try to find route from there. Repeat until you are in Vimpeli, and then the solution is trivial. During the descend, all steps are stored in the stack and therefore the the path is now found. If the algorithm ends up into a dead end, then it backtracks one step back, and removes the latest failed step from the stack of current path.</p>
<p>Here is a recursive solution, which finds a route from Vaasa to Vimpeli. Because it always takes the last added town from the stack, it is a depth first approach. It can be easily modified to find all possible paths.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define a helper function for plotting </span>
<span class="k">def</span> <span class="nf">printQandD</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
    <span class="n">distance</span><span class="o">=</span><span class="mi">0</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Queue: [&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">node</span><span class="p">,</span><span class="n">d</span> <span class="ow">in</span> <span class="n">q</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;, &#39;</span><span class="p">),</span>
        <span class="n">distance</span><span class="o">+=</span><span class="n">d</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;] = &quot;</span><span class="p">,</span> <span class="n">distance</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Acrtual recursive search</span>
<span class="k">def</span> <span class="nf">RecursiveDFS</span><span class="p">(</span><span class="n">stack</span><span class="p">):</span>
    <span class="n">current_node</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">current_node</span><span class="o">==</span><span class="n">vimpeli</span><span class="p">:</span>
        <span class="n">printQandD</span><span class="p">(</span><span class="n">stack</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">stack</span>
    <span class="k">for</span> <span class="n">neighbor</span><span class="p">,</span> <span class="n">distance</span> <span class="ow">in</span> <span class="n">current_node</span><span class="o">.</span><span class="n">neighbors</span><span class="p">:</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="n">RecursiveDFS</span><span class="p">(</span><span class="n">stack</span> <span class="o">+</span> <span class="p">[(</span><span class="n">neighbor</span><span class="p">,</span> <span class="n">distance</span><span class="p">)])</span>
        <span class="k">if</span> <span class="n">retval</span><span class="p">:</span>
            <span class="c1"># This return breaks the search. If this is removed </span>
            <span class="c1"># it continues to remove all possible path</span>
            <span class="k">return</span> <span class="n">retval</span>
    <span class="k">return</span> <span class="kc">False</span>

<span class="c1"># Start the search and print the results</span>
<span class="n">path</span><span class="o">=</span><span class="n">RecursiveDFS</span><span class="p">([(</span><span class="n">vaasa</span><span class="p">,</span><span class="mi">0</span><span class="p">)])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loppu&quot;</span><span class="p">)</span>
<span class="n">distance</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
    <span class="n">distance</span><span class="o">=</span><span class="n">distance</span><span class="o">+</span><span class="n">d</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%10s</span><span class="s2"> : </span><span class="si">%4d</span><span class="s2"> km&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">distance</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Queue: [Vaasa, Vöyri, Kauhava, Lappajärvi, Vimpeli, ] =  138
Loppu
     Vaasa :    0 km
     Vöyri :   32 km
   Kauhava :   77 km
Lappajärvi :  115 km
   Vimpeli :  138 km
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="recursive-breadth-first-solution">
<h4>Recursive breadth first solution<a class="headerlink" href="#recursive-breadth-first-solution" title="Permalink to this headline">¶</a></h4>
<p>The core is otherwise the same as Depth first, but now the latest solution is taken from the bottom of the queue (FIFO). Therefore it expands nodes bredth first manner.</p>
<p>This implementation does not keep track fo the current paths stack, and it does not yet find the actual path. But this feature can be added to the implementation. The current implementation visits all towns and lists them in Breadth first search order.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">##The implementation of the breadth first search (BFS) is now simply the following</span>

<span class="k">def</span> <span class="nf">printQueue</span><span class="p">(</span><span class="n">q</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  Queue: [&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">q</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;, &#39;</span><span class="p">),</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">bfs</span><span class="p">(</span><span class="n">start_node</span><span class="p">):</span>
    <span class="n">queue</span> <span class="o">=</span> <span class="p">[</span><span class="n">start_node</span><span class="p">]</span>
    <span class="n">explored</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
        <span class="n">printQueue</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span>
        <span class="n">current_node</span><span class="o">=</span><span class="n">queue</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">current_node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">explored</span><span class="p">:</span>
            <span class="n">explored</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_node</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">neighbor</span><span class="p">,</span> <span class="n">distance</span> <span class="ow">in</span> <span class="n">current_node</span><span class="o">.</span><span class="n">neighbors</span><span class="p">:</span>
                <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">neighbor</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">explored</span>


<span class="n">path</span><span class="o">=</span><span class="n">bfs</span><span class="p">(</span><span class="n">vaasa</span><span class="p">)</span>
<span class="n">printQueue</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  Queue: [Vaasa, ]
  Queue: [Vöyri, Laihia, ]
  Queue: [Laihia, Kauhava, Jepua, ]
  Queue: [Kauhava, Jepua, Ilmajoki, Ylistaro, ]
  Queue: [Jepua, Ilmajoki, Ylistaro, Lappajärvi, Evijärvi, ]
  Queue: [Ilmajoki, Ylistaro, Lappajärvi, Evijärvi, Kauhava, ]
  Queue: [Ylistaro, Lappajärvi, Evijärvi, Kauhava, Seinäjoki, ]
  Queue: [Lappajärvi, Evijärvi, Kauhava, Seinäjoki, Seinäjoki, Lapua, ]
  Queue: [Evijärvi, Kauhava, Seinäjoki, Seinäjoki, Lapua, Vimpeli, ]
  Queue: [Kauhava, Seinäjoki, Seinäjoki, Lapua, Vimpeli, Vimpeli, ]
  Queue: [Seinäjoki, Seinäjoki, Lapua, Vimpeli, Vimpeli, ]
  Queue: [Seinäjoki, Lapua, Vimpeli, Vimpeli, Lapua, ]
  Queue: [Lapua, Vimpeli, Vimpeli, Lapua, ]
  Queue: [Vimpeli, Vimpeli, Lapua, Kauhava, Alajarvi, ]
  Queue: [Vimpeli, Lapua, Kauhava, Alajarvi, ]
  Queue: [Lapua, Kauhava, Alajarvi, ]
  Queue: [Kauhava, Alajarvi, ]
  Queue: [Alajarvi, ]
  Queue: [Kyyjarvi, Vimpeli, Kuortane, ]
  Queue: [Vimpeli, Kuortane, ]
  Queue: [Kuortane, ]
  Queue: [Vaasa, Vöyri, Laihia, Kauhava, Jepua, Ilmajoki, Ylistaro, Lappajärvi, Evijärvi, Seinäjoki, Lapua, Vimpeli, Alajarvi, Kyyjarvi, Kuortane, ]
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="solution-using-networkx-graph-library">
<h3>Solution using Networkx graph library<a class="headerlink" href="#solution-using-networkx-graph-library" title="Permalink to this headline">¶</a></h3>
<p>The previous implementations have shown approaches for implementing graph searching. But there are also many libraries with ready made implementations of various graph search algorithms. <a class="reference external" href="https://networkx.org/">Networkx</a> is one of the most often used graph libraries in Python.</p>
<p>I have collected some additional information about the towns between Vaasa and Vimpeli, for example the coordinates of the towns, which can be used for calculating the direct line distances between them to define a heuristic function for guiding the graph search for most promising directions.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  Name      Northing      Easting
0 Akaa      61.167145977  23.865888764
1 Alajärvi  63.001273254  23.817522812
2 Alavieska 64.166646246  24.307213479
3 Alavus    62.586161997  23.616600589
4 Asikkala  61.172512361  25.549142484
5 Askola    60.530210718  25.598880612
...
</pre></div>
</div>
<p>The following function calculates the coordinates of the towns based on their longitudes and latitudes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This code calculates the coordinates of the towns. It is only needed for nice plotting</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sin</span><span class="p">,</span> <span class="n">pi</span>

<span class="n">Coordinates</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/coordinates.csv&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">getCoordinates</span><span class="p">(</span><span class="n">Location</span><span class="p">,</span> <span class="n">Theta</span><span class="o">=</span><span class="mf">63.092589</span><span class="p">):</span>
    <span class="n">Ps</span><span class="o">=</span><span class="n">Coordinates</span><span class="p">[</span><span class="n">Coordinates</span><span class="o">.</span><span class="n">Name</span><span class="o">==</span><span class="n">Location</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">Ps</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Now location </span><span class="si">%s</span><span class="s2"> found!&quot;</span> <span class="o">%</span> <span class="n">Location</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">P</span><span class="o">=</span><span class="n">Ps</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># Earth radius / km</span>
    <span class="n">R</span><span class="o">=</span><span class="mf">6371.0</span>    <span class="c1"># Average</span>
    <span class="n">Rp</span><span class="o">=</span><span class="mf">6356.8</span>   <span class="c1"># Polar</span>
    <span class="n">Re</span><span class="o">=</span><span class="mf">6378.1</span>   <span class="c1"># Equatorial</span>
    <span class="c1">#</span>
    <span class="c1"># Earth radius in current Northing</span>
    <span class="c1">#Theta=P.Northing/180*pi</span>
    <span class="c1">#Theta=63.092589</span>
    <span class="n">r</span><span class="o">=</span><span class="n">sin</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="n">Theta</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span><span class="n">Re</span>
    <span class="c1">#</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="n">Northing</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span><span class="n">Rp</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="n">Easting</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span><span class="n">r</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">getCoordinates</span><span class="p">(</span><span class="s1">&#39;Vaasa&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">getCoordinates</span><span class="p">(</span><span class="s1">&#39;Seinäjoki&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1088.9504471170537, 6999.93912935637)
(1150.7335047599795, 6965.997532375281)
</pre></div>
</div>
</div>
</div>
<div class="section" id="encoding-the-information">
<h4>Encoding the information<a class="headerlink" href="#encoding-the-information" title="Permalink to this headline">¶</a></h4>
<p>The biggest work when using the  Networkx all other similar libraries, is to encode the information for the library. In the code below, the libraries are first imported into the workspace, and empty graph is created.</p>
<p>Then the nodes are added from the list of towns using for-loop. The coordinates of the towns are added in each node (the pos attribute) to be able to plot the graph in actual scale.</p>
<p>The roads between the towns are added as edges. The lengths of the roads are added as weigths of edges.</p>
<p>The networx library includes convenient funtions for plotting the graph. The weights of the edges can be plotted in the edges and the pos-attribute is now used to place the towns in a coordinate system.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This code generates the graph</span>

<span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Create an empty directed graph</span>
<span class="n">M</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">DiGraph</span><span class="p">()</span>

<span class="c1"># List of towns added as nodes</span>
<span class="n">Towns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Vaasa&#39;</span><span class="p">,</span> <span class="s1">&#39;Laihia&#39;</span><span class="p">,</span> <span class="s1">&#39;Vöyri&#39;</span><span class="p">,</span> <span class="s1">&#39;Ilmajoki&#39;</span><span class="p">,</span> <span class="s1">&#39;Ylistaro&#39;</span><span class="p">,</span> <span class="s1">&#39;Seinäjoki&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Vöyri&#39;</span><span class="p">,</span> <span class="s1">&#39;Lapua&#39;</span><span class="p">,</span> <span class="s1">&#39;Jepua&#39;</span><span class="p">,</span> <span class="s1">&#39;Alajärvi&#39;</span><span class="p">,</span> <span class="s1">&#39;Kyyjärvi&#39;</span><span class="p">,</span> <span class="s1">&#39;Kuortane&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Kauhava&#39;</span><span class="p">,</span> <span class="s1">&#39;Lappajärvi&#39;</span><span class="p">,</span> <span class="s1">&#39;Evijärvi&#39;</span><span class="p">,</span> <span class="s1">&#39;Vimpeli&#39;</span><span class="p">]</span>

<span class="c1"># Add the nodes and store the coordinates of the towns as well, for nice plotting</span>
<span class="k">for</span> <span class="n">town</span> <span class="ow">in</span> <span class="n">Towns</span><span class="p">:</span>
    <span class="n">M</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">town</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">getCoordinates</span><span class="p">(</span><span class="n">town</span><span class="p">))</span>

<span class="c1"># Add the edges, and their weights = distances </span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Vaasa&#39;</span><span class="p">,</span> <span class="s1">&#39;Laihia&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">26</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Vaasa&#39;</span><span class="p">,</span> <span class="s1">&#39;Vöyri&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Laihia&#39;</span><span class="p">,</span> <span class="s1">&#39;Ilmajoki&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Laihia&#39;</span><span class="p">,</span> <span class="s1">&#39;Ylistaro&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">29</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Vöyri&#39;</span><span class="p">,</span> <span class="s1">&#39;Jepua&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Vöyri&#39;</span><span class="p">,</span> <span class="s1">&#39;Kauhava&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">56</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Ilmajoki&#39;</span><span class="p">,</span> <span class="s1">&#39;Seinäjoki&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Ylistaro&#39;</span><span class="p">,</span> <span class="s1">&#39;Seinäjoki&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">27</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Ylistaro&#39;</span><span class="p">,</span> <span class="s1">&#39;Lapua&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">28</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Seinäjoki&#39;</span><span class="p">,</span> <span class="s1">&#39;Lapua&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">26</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Vöyri&#39;</span><span class="p">,</span> <span class="s1">&#39;Kauhava&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Vöyri&#39;</span><span class="p">,</span> <span class="s1">&#39;Jepua&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Lapua&#39;</span><span class="p">,</span> <span class="s1">&#39;Kauhava&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Lapua&#39;</span><span class="p">,</span> <span class="s1">&#39;Alajärvi&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">46</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Jepua&#39;</span><span class="p">,</span> <span class="s1">&#39;Kauhava&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">56</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Alajärvi&#39;</span><span class="p">,</span> <span class="s1">&#39;Kyyjärvi&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">36</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Alajärvi&#39;</span><span class="p">,</span> <span class="s1">&#39;Vimpeli&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Alajärvi&#39;</span><span class="p">,</span> <span class="s1">&#39;Kuortane&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Kauhava&#39;</span><span class="p">,</span> <span class="s1">&#39;Lappajärvi&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">38</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Kauhava&#39;</span><span class="p">,</span> <span class="s1">&#39;Evijärvi&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">44</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Lappajärvi&#39;</span><span class="p">,</span> <span class="s1">&#39;Vimpeli&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s1">&#39;Evijärvi&#39;</span><span class="p">,</span> <span class="s1">&#39;Vimpeli&#39;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>

<span class="c1"># Plot the graph nicely in scale</span>
<span class="n">fig</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="n">pos</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">get_node_attributes</span><span class="p">(</span><span class="n">M</span><span class="p">,</span><span class="s1">&#39;pos&#39;</span><span class="p">)</span> 
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">)</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">get_edge_attributes</span><span class="p">(</span><span class="n">M</span><span class="p">,</span><span class="s1">&#39;weight&#39;</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edge_labels</span><span class="p">(</span><span class="n">M</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span><span class="n">edge_labels</span><span class="o">=</span><span class="n">labels</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Graph is ready&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Graph is ready
</pre></div>
</div>
<img alt="_images/aitools_13_1.png" src="_images/aitools_13_1.png" />
</div>
</div>
</div>
<div class="section" id="asking-questions-from-the-graph">
<h4>Asking questions from the graph<a class="headerlink" href="#asking-questions-from-the-graph" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">M</span><span class="o">.</span><span class="n">neighbors</span><span class="p">(</span><span class="s1">&#39;Kauhava&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Lappajärvi&#39;, &#39;Evijärvi&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#nx.depth_first_search.dfs_successors(M,&#39;Vaasa&#39;)</span>
<span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nx</span><span class="o">.</span><span class="n">breadth_first_search</span><span class="o">.</span><span class="n">bfs_successors</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="s1">&#39;Vaasa&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;Vaasa&#39;, [&#39;Laihia&#39;, &#39;Vöyri&#39;])
(&#39;Laihia&#39;, [&#39;Ilmajoki&#39;, &#39;Ylistaro&#39;])
(&#39;Vöyri&#39;, [&#39;Jepua&#39;, &#39;Kauhava&#39;])
(&#39;Ilmajoki&#39;, [&#39;Seinäjoki&#39;])
(&#39;Ylistaro&#39;, [&#39;Lapua&#39;])
(&#39;Kauhava&#39;, [&#39;Lappajärvi&#39;, &#39;Evijärvi&#39;])
(&#39;Lapua&#39;, [&#39;Alajärvi&#39;])
(&#39;Lappajärvi&#39;, [&#39;Vimpeli&#39;])
(&#39;Alajärvi&#39;, [&#39;Kyyjärvi&#39;, &#39;Kuortane&#39;])
</pre></div>
</div>
</div>
</div>
<p>The breadth first ordering of the towns can be used to find a path from Vaasa to Vimpeli, by starting from Vimpeli to the parent Lappajärvi, and so on the reverse order up to Vaasa.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Vaasa -&gt; Vöyri -&gt; Kauhava -&gt; Lappajärvi -&gt; Vimpeli
</pre></div>
</div>
<p>The path is unique in this ordering but not necessary optimal, since the weights are not taken into account.</p>
</div>
<div class="section" id="a-algorithm">
<h4>A* algorithm<a class="headerlink" href="#a-algorithm" title="Permalink to this headline">¶</a></h4>
<p>More optimal path minimizing the weights can be found using A* algorithm. If no heuristic function is given, the algorith is using <a class="reference external" href="https://www.geeksforgeeks.org/dijkstras-shortest-path-algorithm-greedy-algo-7/">Dijkstra’s algorithm</a>. It finds an optimal path, but it may be slow for very large graphs, because Dijkstra’s algorith is uninformed search algorithm.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shortest path     :&quot;</span><span class="p">,</span>  <span class="n">nx</span><span class="o">.</span><span class="n">astar_path</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="s1">&#39;Vaasa&#39;</span><span class="p">,</span> <span class="s1">&#39;Vimpeli&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shortest path     :&quot;</span><span class="p">,</span>  <span class="n">nx</span><span class="o">.</span><span class="n">astar_path</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="s1">&#39;Vaasa&#39;</span><span class="p">,</span> <span class="s1">&#39;Vimpeli&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shortest distance :&quot;</span><span class="p">,</span> <span class="n">nx</span><span class="o">.</span><span class="n">astar_path_length</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="s1">&#39;Vaasa&#39;</span><span class="p">,</span> <span class="s1">&#39;Vimpeli&#39;</span><span class="p">),</span> <span class="s2">&quot;km&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Shortest path     : [&#39;Vaasa&#39;, &#39;Vöyri&#39;, &#39;Kauhava&#39;, &#39;Lappajärvi&#39;, &#39;Vimpeli&#39;]
Shortest path     : [&#39;Vaasa&#39;, &#39;Vöyri&#39;, &#39;Kauhava&#39;, &#39;Lappajärvi&#39;, &#39;Vimpeli&#39;]
Shortest distance : 138 km
</pre></div>
</div>
</div>
</div>
<p>The A* algorith is informed search, which is made for efficient using so called heuristic function. In case of navigation, the natural heuristic function is to calculate the line sight distance remaining to the target, and use that to judge the fitness of different options for the next step. This distance can be easily calculated, since the coordinates of the towns is known.</p>
<p>The heuristic function needed by A* method takes two nodes as a parameter and returns the line of sight distance between them. For example, when the algorithm needs to choose should it go either Laihia or Vöyri from Vaasa, the decision is made by adding the distance to the next time and the line of sight distance from that town to Vimpeli, and the decision with smallest costs is selected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">random</span>

<span class="k">def</span> <span class="nf">distanceByName</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">):</span>
    <span class="n">a</span><span class="o">=</span><span class="n">getCoordinates</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">a</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">b</span><span class="o">=</span><span class="n">getCoordinates</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">b</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="c1">#print(a,b)</span>
    <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="p">)</span>
    
<span class="k">def</span> <span class="nf">heuristic</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">distanceByName</span><span class="p">(</span><span class="n">u</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>

<span class="c1"># Test the method in the first step</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Estimated costs through Vöyri is  &quot;</span><span class="p">,</span> <span class="mi">32</span> <span class="o">+</span> <span class="n">heuristic</span><span class="p">(</span><span class="s1">&#39;Vöyri&#39;</span><span class="p">,</span> <span class="s1">&#39;Vimpeli&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Estimated costs through Laihia is &quot;</span><span class="p">,</span> <span class="mi">26</span> <span class="o">+</span> <span class="n">heuristic</span><span class="p">(</span><span class="s1">&#39;Laihia&#39;</span><span class="p">,</span> <span class="s1">&#39;Vimpeli&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Estimated costs through Vöyri is   111.06838998333184
Estimated costs through Laihia is  119.41142572684615
</pre></div>
</div>
</div>
</div>
<p>Path through Vöyri seems shorter, so that is selected as the first step.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> path = nx.astar_path(M, &#39;Vaasa&#39;, &#39;Vimpeli&#39;, heuristic=heuristic, weight=&#39;weight&#39;)
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shortest path     :&quot;</span><span class="p">,</span>  <span class="n">nx</span><span class="o">.</span><span class="n">astar_path</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="s1">&#39;Vaasa&#39;</span><span class="p">,</span> <span class="s1">&#39;Vimpeli&#39;</span><span class="p">,</span> <span class="n">heuristic</span><span class="o">=</span><span class="n">heuristic</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;weight&#39;</span><span class="p">),</span> <span class="p">)</span>
<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shortest distance :&quot;</span><span class="p">,</span> <span class="n">nx</span><span class="o">.</span><span class="n">astar_path_length</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="s1">&#39;Vaasa&#39;</span><span class="p">,</span> <span class="s1">&#39;Vimpeli&#39;</span><span class="p">,</span> <span class="n">heuristic</span><span class="o">=</span><span class="n">heuristic</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;weight&#39;</span><span class="p">),</span> <span class="s2">&quot;km&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8.42 ms ± 33 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
Shortest path     : [&#39;Vaasa&#39;, &#39;Vöyri&#39;, &#39;Kauhava&#39;, &#39;Lappajärvi&#39;, &#39;Vimpeli&#39;]
Shortest distance : 138 km
</pre></div>
</div>
</div>
</div>
<p>The path found is probably optimal, since the A* algorith search multiple paths from source to destination to find the true costs. The algorith uses the heuristic function to make the search faster but due to search of multiple paths, the quality of the heuristic function is not crucial. The algorithm also keeps track of the true costs already calculated, and therefore it does not need to calculate the true costs of a certain path twice.</p>
</div>
<div class="section" id="more-complex-example">
<h4>More complex example<a class="headerlink" href="#more-complex-example" title="Permalink to this headline">¶</a></h4>
<p>See below an example of the search in one magnitude more complex graph, and the nice visualization capabilities of the networkx library.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">N</span><span class="o">=</span><span class="mi">400</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">random_geometric_graph</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="mf">0.125</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">get_node_attributes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="s2">&quot;pos&quot;</span><span class="p">)</span>

<span class="n">nodelist</span> <span class="o">=</span> <span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">A</span><span class="o">=</span><span class="mi">1</span>
<span class="n">B</span><span class="o">=</span><span class="mi">20</span>
<span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;orange&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">N</span>
<span class="n">colors</span><span class="p">[</span><span class="n">A</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span>
<span class="n">colors</span><span class="p">[</span><span class="n">B</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;green&#39;</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edges</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_nodes</span><span class="p">(</span>
    <span class="n">G</span><span class="p">,</span>
    <span class="n">pos</span><span class="p">,</span>
    <span class="n">nodelist</span><span class="o">=</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span>
    <span class="n">node_size</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span>
    <span class="n">node_color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
<span class="p">)</span>

<span class="o">%</span><span class="k">time</span> path=nx.astar_path(G,A,B)
<span class="n">path_edges</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_edges</span><span class="p">(</span><span class="n">G</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span><span class="n">edgelist</span><span class="o">=</span><span class="n">path_edges</span><span class="p">,</span><span class="n">edge_color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw_networkx_nodes</span><span class="p">(</span><span class="n">G</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span><span class="n">nodelist</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">node_size</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 3.06 ms, sys: 322 µs, total: 3.39 ms
Wall time: 3.39 ms
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(-0.09958297307894066,
 1.1035920983535217,
 -0.10150557132936275,
 1.1032264276041368)
</pre></div>
</div>
<img alt="_images/aitools_26_2.png" src="_images/aitools_26_2.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">timeit</span> path=nx.astar_path(G,A,B)
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shortest path     :&quot;</span><span class="p">,</span>  <span class="n">path</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shortest distance :&quot;</span><span class="p">,</span> <span class="n">nx</span><span class="o">.</span><span class="n">astar_path_length</span><span class="p">(</span><span class="n">G</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">),</span> <span class="s2">&quot;steps&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.05 ms ± 110 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
Shortest path     : [1, 88, 292, 38, 283, 307, 24, 363, 324, 174, 20]
Shortest distance : 10 steps
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="intelligent-navigation-agent">
<h2>Intelligent navigation agent<a class="headerlink" href="#intelligent-navigation-agent" title="Permalink to this headline">¶</a></h2>
<p>The intelligent navigation agent can perceive it’s current location using GPS or other Global Navigation Satellite System (GNSS) and the target location is included in the state, set by the user. The map, in the form of a graph, shown above, is the data model and knowledge database for an agent.</p>
<ul class="simple">
<li><p>An agent making uninformed search and selecting the first path found is a goal based agent. It can find a route to the target, but does not optimize utility</p></li>
<li><p>An agent using weights and A* finds an optimal path, trying to maximize the utility. This kind of agent would be a utility based agent.</p></li>
<li><p>Some navigation systems monitor the true time taken for drivers on different paths, and they can update the weights based on their observations. Google navigator, for example, can observe traffic jams, and optimize the routes based on the real time traffic information. These kinds of agents are called as learning navigation agents.</p></li>
</ul>
<p>The strategies shown above can be utilized also for many other purposes, such as solving the 8-puzzle or playing chess. All possible moves taken in each turn spans a graph, which can become very large,  in which case, the whole graph of all possible solutions cannot be pre-stored in the memory, but expanded step by step as necessary, guided by the heuristic function.</p>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>In this module the methods for searching data and paths from graph and using graph library has been covered.
The learning outcomes of the module:</p>
<ul class="simple">
<li><p>How the data is encoded as data structures in programs</p></li>
<li><p>Some implementation strategies for breadth first, depth first and A* searches</p></li>
<li><p>Implementation strategy of a heuristic function</p></li>
<li><p>Overall view of the services provided by the Networkx library and the possibilities it provides</p></li>
<li><p>Some understanding of Python programing</p></li>
<li><p>How to use graph search as part of and intelligent agent, also in cases where the full graph is not known <em>a-priori</em>.</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="blockdiag.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Block diagram of AI</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="inference.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Probabilistic inference</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Petri Välisuo<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>